{"is_source_file": true, "format": "JavaScript", "description": "This file provides an API client for interacting with a Django backend REST API. It includes functions for authentication (register, login, logout), managing conversations, and utility functions for handling CSRF tokens and request headers. It also exports functions that encapsulate HTTP requests to various API endpoints.", "external_files": ["react environment variables (`process.env.REACT_APP_API_BASE_URL`)"], "external_methods": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "published": ["apiRegister", "apiLogin", "apiLogout", "apiAskQuestion", "apiListConversations", "apiGetConversationDetail"], "classes": [], "methods": [{"name": "getCookie(name)", "description": "Reads a cookie value by name from document.cookie.", "scope": "", "scopeKind": ""}, {"name": "ensureCsrfToken()", "description": "Checks if a CSRF token exists in cookies; if not, performs a fetch to prompt the backend to set cookies.", "scope": "", "scopeKind": ""}, {"name": "defaultHeaders", "description": "Generates headers for requests, including Authorization if a token is stored in localStorage."}, {"name": "mutatingHeaders()", "description": "Builds headers for mutating requests, including CSRF token and other necessary headers.", "scope": "", "scopeKind": ""}, {"name": "handleResponse(res)", "description": "Handles the fetch response, parsing JSON or text, and throws error on unsuccessful responses.", "scope": "", "scopeKind": ""}, {"name": "apiAskQuestion({ question, conversation_id })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "apiGetConversationDetail(conversation_id)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "apiListConversations()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "apiLogin({ username, password })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "apiLogout()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "apiRegister({ username, email, password })", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "getCookie", "ensureCsrfToken", "defaultHeaders", "mutatingHeaders"], "search-terms": ["Django REST API client", "CSRF handling", "React fetch API", "auth token management", "conversation endpoints"], "state": 2, "file_id": 14, "knowledge_revision": 60, "git_revision": "333cbe796af7f7e98084f7b57331403be7475ca7", "revision_history": [{"29": ""}, {"60": "333cbe796af7f7e98084f7b57331403be7475ca7"}], "ctags": [{"_type": "tag", "name": "API_BASE_URL", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"http:\\/\\/localhost:8000\\/api\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^    \"Content-Type\": \"application\\/json\"$/", "language": "JavaScript", "kind": "property", "scope": "headers", "scopeKind": "class"}, {"_type": "tag", "name": "apiAskQuestion", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiAskQuestion({ question, conversation_id }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ question, conversation_id })"}, {"_type": "tag", "name": "apiGetConversationDetail", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiGetConversationDetail(conversation_id) {$/", "language": "JavaScript", "kind": "function", "signature": "(conversation_id)"}, {"_type": "tag", "name": "apiListConversations", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiListConversations() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "apiLogin", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiLogin({ username, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ username, password })"}, {"_type": "tag", "name": "apiLogout", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiLogout() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "apiRegister", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^export async function apiRegister({ username, email, password }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ username, email, password })"}, {"_type": "tag", "name": "defaultHeaders", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^const defaultHeaders = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ensureCsrfToken", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^async function ensureCsrfToken() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCookie", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^function getCookie(name) {$/", "language": "JavaScript", "kind": "function", "signature": "(name)"}, {"_type": "tag", "name": "handleResponse", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^async function handleResponse(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^  const headers = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "mutatingHeaders", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^async function mutatingHeaders() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/ai-qa-chatbot-platform-2765-2774/qna_frontend/src/services/api.js", "pattern": "/^  const token = localStorage.getItem(\"authToken\");$/", "language": "JavaScript", "kind": "constant"}], "hash": "67395bd074e36fce55eaae7d22c671a2", "format-version": 4, "code-base-name": "qna_frontend", "filename": "qna_frontend/src/services/api.js", "fields": [{"name": "\"Content-Type\": \"application\\/json\"", "scope": "headers", "scopeKind": "class", "description": "unavailable"}]}